<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>SPORAX WEALTH & ASSET DATABASES</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #e2e8f0; }
        .header-gradient { background: -webkit-linear-gradient(45deg, #fde047, #fcd34d, #f97316);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .card-bg { background-color: #1e293b; }
        .person-card { transition: opacity 0.4s ease-in; opacity: 1; }
        .fade-in-initial { opacity: 0; }
        .fade-in-initial.ready { opacity: 1; }
        .flag { font-size: 20px; margin-right: 6px; }
    </style>
</head>
<body class="min-h-screen">
    <div id="app" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <header class="text-center mb-16 pt-8">
            <div class="flex items-center justify-center space-x-4">
                <img src="https://i.ibb.co/SwBgZdML/sporaxlogo.png" alt="sporaxlogo" border="0" class="w-12 h-12 sm:w-16 sm:h-16">
                <h1 class="header-gradient text-6xl sm:text-8xl font-black tracking-tighter">SPORAX</h1>
            </div>
            <p class="text-sm tracking-widest uppercase text-slate-400 mt-2" style="letter-spacing: 0.4em;">
                Reliable Wealth Analysis since 2003
            </p>
            <div class="mt-10 w-full max-w-2xl mx-auto">
                <div class="flex items-center bg-slate-800 rounded-xl p-3 border border-slate-700 hover:border-amber-400 transition-all duration-300 shadow-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-500 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                    <input type="text" id="search-input" oninput="searchCards(this.value)" placeholder="Search individuals, companies, or assets..." class="w-full bg-transparent text-lg focus:outline-none placeholder-slate-500" />
                </div>
            </div>
        </header>

        <section id="search-results-section" class="mb-20 hidden">
            <h2 class="text-3xl font-bold text-slate-200 mb-6">Search Results</h2>
            <div id="search-results-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"></div>
        </section>

        <section class="mb-20 p-8 card-bg rounded-xl shadow-lg border border-slate-700 text-center">
            <div class="flex items-center justify-center space-x-3 mb-4">
                <img src="https://i.ibb.co/SwBgZdML/sporaxlogo.png" alt="sporaxlogo" border="0" class="w-8 h-8">
                <h2 class="text-3xl font-bold text-amber-400">What is SPORAX?</h2>
            </div>
            <p class="text-slate-300 leading-relaxed max-w-4xl mx-auto">
                SPORAX is a leading public wealth and asset database, dedicated to providing timely and highly accurate net worth estimations for notable individuals and valuable businesses globally.
            </p>
            <div class="flex flex-wrap gap-4 mt-6 text-sm justify-center">
                <span class="inline-flex items-center rounded-full bg-red-900 px-3 py-1 text-red-300">RRPT - Public Transactions</span>
                <span class="inline-flex items-center rounded-full bg-blue-900 px-3 py-1 text-blue-300">IAR - Institutional Records</span>
                <span class="inline-flex items-center rounded-full bg-green-900 px-3 py-1 text-green-300">RNS - News Sources</span>
            </div>
        </section>

        <section class="mb-20">
            <h2 class="text-3xl font-bold text-slate-200 mb-6">Highlight News Stories</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="card-bg p-6 rounded-xl border border-slate-700 hover:border-amber-500 transition-colors cursor-pointer">
                    <p class="text-xs text-amber-500 mb-1">MARKET WATCH / 3 days ago</p>
                    <h3 class="text-xl font-semibold mb-2 text-slate-100">Tech Baron's Latest Acquisition Shakes Up Logistics Sector</h3>
                    <p class="text-slate-400 text-sm">A major CEO has finalized a $25B deal, shifting $10B in assets to a new holding company.</p>
                </div>
                <div class="card-bg p-6 rounded-xl border border-slate-700 hover:border-amber-500 transition-colors cursor-pointer">
                    <p class="text-xs text-amber-500 mb-1">FINANCIAL TIMES / 1 week ago</p>
                    <h3 class="text-xl font-semibold mb-2 text-slate-100">Regulatory Filings Reveal New Multi-Million Real Estate Portfolio</h3>
                    <p class="text-slate-400 text-sm">New RRPT data indicates several high-net-worth individuals are diversifying into luxury European properties.</p>
                </div>
                <div class="card-bg p-6 rounded-xl border border-slate-700 hover:border-amber-500 transition-colors cursor-pointer">
                    <p class="text-xs text-amber-500 mb-1">BUSINESS INSIDER / 2 hours ago</p>
                    <h3 class="text-xl font-semibold mb-2 text-slate-100">Global Philanthropy Pledges: Who's Up and Who's Down?</h3>
                    <p class="text-slate-400 text-sm">RNS reports show several billionaires committed large portions of their wealth.</p>
                </div>
            </div>
        </section>

        <section id="popular-cards-section" class="mb-16">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-slate-200">Popular Cards</h2>
                <div class="flex items-center space-x-3">
                    <label for="sort-select" class="text-slate-400 text-sm">Sort By:</label>
                    <select id="sort-select" onchange="sortAndRenderCards()" class="bg-slate-800 text-slate-200 text-sm rounded-lg p-2 border border-slate-700 focus:ring-amber-500 focus:border-amber-500">
                        <option value="wealth_desc">Net Worth (High to Low)</option>
                        <option value="name_asc">Name (A-Z)</option>
                    </select>
                </div>
            </div>
            <div id="cards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"></div>
            <div class="text-center mt-12">
                <button id="load-more-btn" class="bg-amber-500 hover:bg-amber-600 text-slate-900 font-semibold py-3 px-8 rounded-full transition duration-300 shadow-md hover:shadow-lg transform hover:scale-[1.02]"
                        onclick="loadMore()">
                    Load More Cards
                </button>
            </div>
        </section>
    </div>

    <div id="card-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 hidden" onclick="closeModal()">
        <div id="modal-content" class="card-bg rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto transform scale-95 transition-all duration-300" onclick="event.stopPropagation()"></div>
    </div>

    <footer class="bg-slate-900 border-t border-slate-800 mt-16 py-8 text-center">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <p class="text-sm text-slate-500 mb-4">
                ¬© 2026 SPORAX Wealth & Asset Databases. All Rights Reserved.
            </p>
            <div class="flex justify-center space-x-6 text-sm">
                <a href="#" class="text-slate-400 hover:text-amber-400 transition-colors">Privacy Policy</a>
                <a href="#" class="text-slate-400 hover:text-amber-400 transition-colors">Terms of Use</a>
                <a href="#" class="text-slate-400 hover:text-amber-400 transition-colors">Methodology</a>
                <a href="#" class="text-slate-400 hover:text-amber-400 transition-colors">Careers</a>
            </div>
        </div>
    </footer>

    <script>
        // Data and Configuration
        let initialCardCount = 12; // Start with 12 cards now
        let currentCardCount = initialCardCount;

        const SOURCES = {
            RRPT: { id: 'RRPT', name: 'Region-Restricted Public Transactions', color: 'bg-red-500' },
            IAR: { id: 'IAR', name: 'Institutional Asset Records', color: 'bg-blue-500' },
            RNS: { id: 'RNS', name: 'Reliable News Sources', color: 'bg-green-500' },
            MANUAL: { id: 'MANUAL', name: 'Manual Input', color: 'bg-slate-500' }
        };

        // NEW: Function to abbreviate large numbers (e.g., 210000000000 -> $210B)
        function formatValue(num) {
            if (num === 0) return '$0';
            if (!num) return 'N/A';

            const absNum = Math.abs(num);
            const sign = Math.sign(num) === -1 ? '-' : '';
            const units = [
                { value: 1e12, symbol: 'T' },
                { value: 1e9, symbol: 'B' },
                { value: 1e6, symbol: 'M' },
                { value: 1e3, symbol: 'K' }
            ];

            for (let i = 0; i < units.length; i++) {
                if (absNum >= units[i].value) {
                    const formatted = (absNum / units[i].value).toFixed(1);
                    // Remove trailing .0 if present
                    const finalFormatted = formatted.endsWith('.0') ? formatted.slice(0, -2) : formatted;
                    return `${sign}$${finalFormatted}${units[i].symbol}`;
                }
            }
            return `${sign}$${absNum.toLocaleString()}`;
        }

        // Helper: create readable multiple-news HTML
        function newsListHtml(newsArray) {
            if (!newsArray || newsArray.length === 0) return '<p class="text-slate-500 italic">none available</p>';
            return newsArray.map(n => `<p class="text-sm italic text-slate-300 leading-snug">‚Ä¢ ${n}</p>`).join('');
        }

        // --- UPDATED People / cards DATA ---
        // Removed string 'value' and Russian 'age' properties. Relying on sortWealth for value calculation.

        const basePeopleData = [
            // 1: Elon Musk
            {
                name: 'Elon Musk',
                flag: 'üá∫üá∏',
                position: 'CEO, Tesla & SpaceX',
                country: 'United States',
                age: 54,
                companies: [
                    { name: 'Tesla Inc', value: '$720B (Market Cap)', logo: 'https://placehold.co/60x60/f43f5e/041426?text=TSLA' },
                    { name: 'SpaceX', value: '$180B (Private Valuation)', logo: 'https://placehold.co/60x60/7c3aed/041426?text=SPX' }
                ],
                sources: [SOURCES.IAR, SOURCES.RRPT, SOURCES.RNS],
                news: [
                    'RNS: Starship launch delays impact short-term investment sentiment.',
                    'RRPT: Sale of $1.5B in stock options filed on Tuesday.',
                    'IAR: SEC filings show increased institutional ownership.'
                ],
                notes: 'Primary wealth derived from public stock holdings; value is highly volatile.',
                image: 'https://placehold.co/100x100/fde047/041426?text=E+M',
                sortWealth: 210000000000
            },
            // 2: Jeff Bezos
            {
                name: 'Jeff Bezos',
                flag: 'üá∫üá∏',
                position: 'Executive Chairman, Amazon',
                country: 'United States',
                age: 61,
                companies: [
                    { name: 'Amazon', value: '$1.8T (Market Cap)', logo: 'https://placehold.co/60x60/f97316/041426?text=AMZN' },
                    { name: 'Blue Origin', value: '$25B (Est. Private Valuation)', logo: 'https://placehold.co/60x60/60a5fa/041426?text=BO' }
                ],
                sources: [SOURCES.IAR, SOURCES.RNS],
                news: [
                    'RNS: Bezos Foundation pledges $100M to climate initiatives.',
                    'IAR: Regulatory filing shows Q3/Q4 stock sales pattern.',
                ],
                notes: 'Significant assets in real estate and private investments not fully accounted for.',
                image: 'https://placehold.co/100x100/fde047/041426?text=J+B',
                sortWealth: 165000000000
            },
            // 3: Lars Bergstr√∂m (Originally #15)
            {
                name: 'Lars Bergstr√∂m',
                flag: 'üá∏üá™',
                position: 'CEO, Nordic SafeBank',
                country: 'Sweden',
                age: 62,
                companies: [{ name: 'Nordic SafeBank', value: '$1.1B (institutional)', logo: 'https://placehold.co/60x60/0ea5a4/041426?text=NS' }],
                sources: [SOURCES.IAR],
                news: ['IAR: Nordic SafeBank reports strong deposit growth quarter-over-quarter.'],
                notes: '',
                image: 'https://placehold.co/100x100/0ea5a4/041426?text=L+B',
                sortWealth: 420000000
            },
            // 4: Owen Clarke (Originally #18)
            {
                name: 'Owen Clarke',
                flag: 'üá¨üáß',
                position: 'CEO, Riverbridge Capital',
                country: 'United Kingdom',
                age: 48,
                companies: [{ name: 'Riverbridge Capital', value: '$3.2B (AUM)', logo: 'https://placehold.co/60x60/7c3aed/041426?text=RC' }],
                sources: [SOURCES.IAR, SOURCES.RNS],
                news: ['RNS: Riverbridge launches new green infrastructure fund.'],
                notes: '',
                image: 'https://placehold.co/100x100/7c3aed/041426?text=O+C',
                sortWealth: 210800000
            },
            // 5: Sophie Dubois (Originally #6)
            {
                name: 'Sophie Dubois',
                flag: 'üá´üá∑',
                position: 'VC Partner, Orsay Capital',
                country: 'France',
                age: 41,
                companies: [{ name: 'Orsay Capital', value: '$1.9B (fund AUM - not personal)', logo: 'https://placehold.co/60x60/60a5fa/041426?text=OC' }],
                sources: [SOURCES.IAR, SOURCES.RRPT],
                news: ['Orsay Capital backs AI logistics startup (RNS)', 'Interview in La Tribune: on climate tech investing.'],
                notes: '',
                image: 'https://placehold.co/100x100/60a5fa/041426?text=S+D',
                sortWealth: 120500000
            },
            // 6: Tariq Al-Mansouri (Originally #7)
            {
                name: 'Tariq Al-Mansouri',
                flag: 'üá¶üá™',
                position: 'Managing Director, GulfBridge Real Estate',
                country: 'UAE',
                age: 55,
                companies: [{ name: 'GulfBridge REIT', value: '$41.3M', logo: 'https://placehold.co/60x60/f97316/041426?text=GB' }],
                sources: [SOURCES.RRPT, SOURCES.RNS],
                news: ['GulfBridge announces luxury hotel conversion (RNS)', 'RRPT: acquisition of Abu Dhabi site completed.'],
                notes: '',
                image: 'https://placehold.co/100x100/f97316/041426?text=T+A',
                sortWealth: 78200000
            },
            // 7: Mateo Alvarez (Originally #16)
            {
                name: 'Mateo Alvarez',
                flag: 'üá®üá±',
                position: 'Founder, Andes Mining & Metals',
                country: 'Chile',
                age: 59,
                companies: [{ name: 'Andes Mining', value: '$55.6M', logo: 'https://placehold.co/60x60/eab308/041426?text=AM' }],
                sources: [SOURCES.RRPT, SOURCES.RNS],
                news: ['RNS: exploration rights extended in central region', 'RRPT: sale of processing plant finalized.'],
                notes: '',
                image: 'https://placehold.co/100x100/eab308/041426?text=M+A',
                sortWealth: 65400000
            },
            // 8: Lina Chen (Originally #10)
            {
                name: 'Lina Chen',
                flag: 'üá®üá≥',
                position: 'Founder, Peony Biotech',
                country: 'China',
                age: 46,
                companies: [
                    { name: 'Peony Biotech', value: '$22.7M', logo: 'https://placehold.co/60x60/a78bfa/041426?text=PB' },
                    { name: 'Shanghai Med Lab', value: '$31.1M', logo: 'https://placehold.co/60x60/60a5fa/041426?text=SML' }
                ],
                sources: [SOURCES.RRPT, SOURCES.RNS],
                news: ['Peony Biotech completes Series B extension (RRPT)', 'RNS: Peony partners with hospital network.'],
                notes: '',
                image: 'https://placehold.co/100x100/a78bfa/041426?text=L+C',
                sortWealth: 53800000
            },
            // 9: Amira El-Khoury (Originally #4)
            {
                name: 'Amira El-Khoury',
                flag: 'üá±üáß',
                position: 'Chairperson, Levante Foods & Holdings',
                country: 'Lebanon',
                age: 38,
                companies: [
                    { name: 'Levante Foods', value: '$18.2M', logo: 'https://placehold.co/60x60/f43f5e/041426?text=LF' },
                    { name: 'Beirut Real Estate SPV', value: '$24.1M', logo: 'https://placehold.co/60x60/7c3aed/041426?text=BR' }
                ],
                sources: [SOURCES.RRPT, SOURCES.RNS],
                news: [
                    'RNS: Levante Foods signs distribution deal across GCC (RNS)',
                    'Local press: El-Khoury invests in a coastal redevelopment project.',
                ],
                notes: '',
                image: 'https://placehold.co/100x100/f43f5e/041426?text=A+E',
                sortWealth: 42300000
            },
            // 10: Marcus Bauer (Originally #44)
            {
                name: 'Marcus Bauer',
                flag: 'üá©üá™',
                position: 'Founder, Berlin Mobility Systems',
                country: 'Germany',
                age: 36,
                companies: [{ name: 'Berlin Mobility Systems', value: '$21.4M', logo: 'https://placehold.co/60x60/7c3aed/041426?text=BM' }],
                sources: [SOURCES.RRPT, SOURCES.IAR],
                news: ['RRPT: municipal contract for micro-mobility fleet awarded.'],
                notes: '',
                image: 'https://placehold.co/100x100/7c3aed/041426?text=M+B',
                sortWealth: 33000000
            },
            // 11: Hannah Parker (Originally #25)
            {
                name: 'Hannah Parker',
                flag: 'üá∫üá∏',
                position: 'Founder, Ember Education (edtech)',
                country: 'United States',
                age: 29,
                companies: [{ name: 'Ember Education', value: '$25.6M', logo: 'https://placehold.co/60x60/60a5fa/041426?text=EE' }],
                sources: [SOURCES.RRPT, SOURCES.RNS],
                news: ['RNS: Ember Education announces international licensing deals.'],
                notes: '',
                image: 'https://placehold.co/100x100/60a5fa/041426?text=H+P',
                sortWealth: 31500000
            },
            // 12: Elena Garc√≠a (Originally #36)
            {
                name: 'Elena Garc√≠a',
                flag: 'üá≤üáΩ',
                position: 'Head, Yucat√°n Resorts',
                country: 'Mexico',
                age: 51,
                companies: [{ name: 'Yucat√°n Resorts', value: '$11.7M', logo: 'https://placehold.co/60x60/0ea5a4/041426?text=YR' }],
                sources: [SOURCES.IAR, SOURCES.RNS],
                news: ['IAR: resort financing completed; RNS feature on tourism rebound.'],
                notes: '',
                image: 'https://placehold.co/100x100/0ea5a4/041426?text=E+G',
                sortWealth: 27500000
            },
            // 13: Katarzyna Nowak (Originally #21)
            {
                name: 'Katarzyna Nowak',
                flag: 'üáµüá±',
                position: 'CEO, Warsaw Clean Energy',
                country: 'Poland',
                age: 44,
                companies: [{ name: 'Warsaw Clean Energy', value: '$8.4M', logo: 'https://placehold.co/60x60/60a5fa/041426?text=WCE' }],
                sources: [SOURCES.RRPT],
                news: ['RRPT: multi-megawatt wind project financing announced.'],
                notes: '',
                image: 'https://placehold.co/100x100/60a5fa/041426?text=K+N',
                sortWealth: 22700000
            },
            // 14: Petra Novak (Originally #14)
            {
                name: 'Petra Novak',
                flag: 'üá®üáø',
                position: 'Managing Partner, Bohemia Venture Partners',
                country: 'Czechia',
                age: 40,
                companies: [{ name: 'Bohemia VP', value: '$250M (fund AUM - not personal)', logo: 'https://placehold.co/60x60/94a3b8/041426?text=BP' }],
                sources: [SOURCES.RRPT, SOURCES.IAR],
                news: ['RRPT: fund II final close announced', 'Profile in CETIN business monthly.'],
                notes: '',
                image: 'https://placehold.co/100x100/94a3b8/041426?text=P+N',
                sortWealth: 18500000
            },
            // 15: Zo√© Martin (Originally #32)
            {
                name: 'Zo√© Martin',
                flag: 'üá®üá¶',
                position: 'Co-founder, Northern Green Solutions',
                country: 'Canada',
                age: 33,
                companies: [{ name: 'Northern Green', value: '$12.3M', logo: 'https://placehold.co/60x60/60a5fa/041426?text=NG' }],
                sources: [SOURCES.RRPT, SOURCES.IAR],
                news: ['RRPT: renewable certificate program participation announced.'],
                notes: '',
                image: 'https://placehold.co/100x100/60a5fa/041426?text=Z+M',
                sortWealth: 16700000
            },
            // 16: Jinsoo Park (Originally #27)
            {
                name: 'Jinsoo Park',
                flag: 'üá∞üá∑',
                position: 'CTO, Seoul Circuit Systems',
                country: 'South Korea',
                age: 49,
                companies: [{ name: 'Seoul Circuit Systems', value: 'KRW 18.2B (converted to USD)', logo: 'https://placehold.co/60x60/0ea5a4/041426?text=SCS' }],
                sources: [SOURCES.RRPT],
                news: ['RRPT: Seoul Circuit wins three-year supply contract in APAC.'],
                notes: 'Converted to USD using latest conversion rate at source.',
                image: 'https://placehold.co/100x100/0ea5a4/041426?text=J+P',
                sortWealth: 14600000
            },
            // 17: Mikhail Ivanov (Originally #24)
            {
                name: 'Mikhail Ivanov',
                flag: 'üá∑üá∫',
                position: 'Investor, Volga Holdings',
                country: 'Russia',
                age: 52,
                companies: [{ name: 'Volga Holdings', value: '$7.5M', logo: 'https://placehold.co/60x60/94a3b8/041426?text=VH' }],
                sources: [SOURCES.MANUAL],
                news: ['none available'],
                notes: 'Private asset valuations from manual reporting.',
                image: 'https://placehold.co/100x100/94a3b8/041426?text=M+I',
                sortWealth: 12000000
            },
            // 18: Helena Martins (Originally #30)
            {
                name: 'Helena Martins',
                flag: 'üáµüáπ',
                position: 'Head, Algarve Renewable Energies',
                country: 'Portugal',
                age: 47,
                companies: [{ name: 'Algarve Renewables', value: '$9.1M', logo: 'https://placehold.co/60x60/7c3aed/041426?text=AR' }],
                sources: [SOURCES.IAR],
                news: ['IAR: funding round closed for offshore testing facility.'],
                notes: '',
                image: 'https://placehold.co/100x100/7c3aed/041426?text=H+M',
                sortWealth: 11900000
            },
            // 19: Yusuf Al-Sayed (Originally #42)
            {
                name: 'Yusuf Al-Sayed',
                flag: 'üá∏üá¶',
                position: 'Founder, Medina Agro Processing',
                country: 'Saudi Arabia',
                age: 39,
                companies: [{ name: 'Medina Agro', value: '$7.2M', logo: 'https://placehold.co/60x60/eab308/041426?text=MA' }],
                sources: [SOURCES.IAR, SOURCES.RNS],
                news: ['IAR: new processing line permits issued; RNS: export to GCC market reported.'],
                notes: '',
                image: 'https://placehold.co/100x100/eab308/041426?text=Y+A',
                sortWealth: 9940000
            },
            // 20: Diego Marquez (Originally #5)
            {
                name: 'Diego Marquez',
                flag: 'üá≤üáΩ',
                position: 'Founder, Cielo Verde Renewable',
                country: 'Mexico',
                age: 35,
                companies: [
                    { name: 'Cielo Verde Renewable', value: '$6.4M', logo: 'https://placehold.co/60x60/10b981/041426?text=CV' },
                    { name: 'Marquez Farms (agri-tech)', value: '$3.35M', logo: 'https://placehold.co/60x60/f59e0b/041426?text=MF' }
                ],
                sources: [SOURCES.IAR, SOURCES.MANUAL],
                news: [
                    'RNS: PV plant procurement deal with government utility.',
                    'none available'
                ],
                notes: '',
                image: 'https://placehold.co/100x100/10b981/041426?text=D+M',
                sortWealth: 9750000
            },
            // 21: Haruto Tanaka (Originally #11)
            {
                name: 'Haruto Tanaka',
                flag: 'üáØüáµ',
                position: 'Chairman, Kyoto Microelectronics',
                country: 'Japan',
                age: 65,
                companies: [{ name: 'Kyoto Microelectronics', value: '¬•900M (converted to USD)', logo: 'https://placehold.co/60x60/60a5fa/041426?text=KM' }],
                sources: [SOURCES.IAR, SOURCES.RNS],
                news: ['RNS: microchip supply partnership with Singapore firm', 'IAR: export license renewed.'],
                notes: 'Converted to USD using latest conversion rate at source.',
                image: 'https://placehold.co/100x100/60a5fa/041426?text=H+T',
                sortWealth: 8900000
            },
            // 22: Adele Mbatha (Originally #38)
            {
                name: 'Adele Mbatha',
                flag: 'üáøüá¶',
                position: 'CEO, Cape Fintech',
                country: 'South Africa',
                age: 31,
                companies: [{ name: 'Cape Fintech', value: 'ZAR 150M (converted to USD)', logo: 'https://placehold.co/60x60/10b981/041426?text=CF' }],
                sources: [SOURCES.RNS],
                news: ['RNS: Cape Fintech expands to two new African markets.'],
                notes: '',
                image: 'https://placehold.co/100x100/10b981/041426?text=A+M',
                sortWealth: 7900000
            },
            // 23: Olga Petrov (Originally #8, age removed)
            {
                name: 'Olga Petrov',
                flag: 'üá∑üá∫',
                position: 'Co-founder, NorthSea Marine Engineering',
                country: 'Russia',
                age: 43,
                companies: [{ name: 'NorthSea ME', value: '$2.7M', logo: 'https://placehold.co/60x60/94a3b8/041426?text=NM' }],
                sources: [SOURCES.MANUAL],
                news: ['none available'],
                notes: 'Manual estimate; limited public filings.',
                image: 'https://placehold.co/100x100/94a3b8/041426?text=O+P',
                sortWealth: 6900000
            },
            // 24: Lucas Pereira (Originally #22)
            {
                name: 'Lucas Pereira',
                flag: 'üáßüá∑',
                position: 'Founder, Amazonia Logistics',
                country: 'Brazil',
                age: 58,
                companies: [{ name: 'Amazonia Logistics', value: 'R$ 32M (converted to USD)', logo: 'https://placehold.co/60x60/eab308/041426?text=AL' }],
                sources: [SOURCES.MANUAL, SOURCES.RNS],
                news: ['RNS: partnership announced with river transport operator.', 'none available'],
                notes: 'Converted to USD using latest conversion rate at time of estimate.',
                image: 'https://placehold.co/100x100/eab308/041426?text=L+P',
                sortWealth: 6600000
            },
            // 25: Oskar Jansson (Originally #39)
            {
                name: 'Oskar Jansson',
                flag: 'üá´üáÆ',
                position: 'Founder, Arctic Data Storage',
                country: 'Finland',
                age: 30,
                companies: [{ name: 'Arctic Data Storage', value: '$4.5M', logo: 'https://placehold.co/60x60/60a5fa/041426?text=AD' }],
                sources: [SOURCES.IAR],
                news: ['IAR: new cold-storage facility announced for secure data archiving.'],
                notes: '',
                image: 'https://placehold.co/100x100/60a5fa/041426?text=O+J',
                sortWealth: 6350000
            },
            // 26: Vladimir Novak (Originally #31)
            {
                name: 'Vladimir Novak',
                flag: 'üá®üáø',
                position: 'Founder, Prague DataWorks',
                country: 'Czechia',
                age: 45,
                companies: [{ name: 'Prague DataWorks', value: '$4.2M', logo: 'https://placehold.co/60x60/94a3b8/041426?text=PD' }],
                sources: [SOURCES.RNS],
                news: ['RNS: Prague DataWorks to open office in Vienna.'],
                notes: '',
                image: 'https://placehold.co/100x100/94a3b8/041426?text=V+N',
                sortWealth: 5700000
            },
            // 27: Arman Karimov (Originally #29)
            {
                name: 'Arman Karimov',
                flag: 'üá∫üáø',
                position: 'Founder, Silk Road Logistics',
                country: 'Uzbekistan',
                age: 37,
                companies: [{ name: 'Silk Road Logistics', value: '$2.9M', logo: 'https://placehold.co/60x60/eab308/041426?text=SR' }],
                sources: [SOURCES.MANUAL],
                news: ['none available'],
                notes: '',
                image: 'https://placehold.co/100x100/eab308/041426?text=A+K',
                sortWealth: 4500000
            },
            // 28: Isabella Rossi (Originally #12)
            {
                name: 'Isabella Rossi',
                flag: 'üáÆüáπ',
                position: 'Founder, Rossi Atelier (fashion)',
                country: 'Italy',
                age: 26,
                companies: [{ name: 'Rossi Atelier', value: '$3.1M', logo: 'https://placehold.co/60x60/fb7185/041426?text=RA' }],
                sources: [SOURCES.RNS, SOURCES.MANUAL],
                news: ['RNS: Rossi Atelier opens second flagship in Milan', 'Local style magazine feature.'],
                notes: '',
                image: 'https://placehold.co/100x100/fb7185/041426?text=I+R',
                sortWealth: 4250000
            },
            // 29: Anya Kov√°cs (Originally #17)
            {
                name: 'Anya Kov√°cs',
                flag: 'üá≠üá∫',
                position: 'Co-founder, Budapest BioLabs',
                country: 'Hungary',
                age: 28,
                companies: [{ name: 'Budapest BioLabs', value: 'HUF 1.1B (converted to USD)', logo: 'https://placehold.co/60x60/60a5fa/041426?text=BB' }],
                sources: [SOURCES.MANUAL],
                news: ['none available'],
                notes: 'Reported in HUF and converted to USD at source estimate.',
                image: 'https://placehold.co/100x100/60a5fa/041426?text=A+K',
                sortWealth: 3900000
            },
            // 30: Aisha Khan (Originally #23)
            {
                name: 'Aisha Khan',
                flag: 'üáµüá∞',
                position: 'CEO, Karakoram Microfinance',
                country: 'Pakistan',
                age: 34,
                companies: [{ name: 'Karakoram Microfinance', value: '$2.1M', logo: 'https://placehold.co/60x60/f97316/041426?text=KM' }],
                sources: [SOURCES.IAR, SOURCES.RNS],
                news: ['IAR: microfinance portfolio reaches 55k active clients', 'RNS local: new rural branch opened.'],
                notes: '',
                image: 'https://placehold.co/100x100/f97316/041426?text=A+K',
                sortWealth: 3450000
            },
            // 31: Ravi Shankar (Originally #33)
            {
                name: 'Ravi Shankar',
                flag: 'üáÆüá≥',
                position: 'Founder, Mumbai Microgrids',
                country: 'India',
                age: 41,
                companies: [{ name: 'Mumbai Microgrids', value: '‚Çπ240M (converted to USD)', logo: 'https://placehold.co/60x60/f59e0b/041426?text=MM' }],
                sources: [SOURCES.IAR],
                news: ['IAR: pilot microgrid project expanded to two neighborhoods.'],
                notes: 'Converted to USD using latest conversion at time of reporting.',
                image: 'https://placehold.co/100x100/f59e0b/041426?text=R+S',
                sortWealth: 3250000
            },
            // 32: Ibrahim Farouk (Originally #20)
            {
                name: 'Ibrahim Farouk',
                flag: 'üá™üá¨',
                position: 'Founder, Nile AgroTech',
                country: 'Egypt',
                age: 30,
                companies: [{ name: 'Nile AgroTech', value: '$1.9M', logo: 'https://placehold.co/60x60/34d399/041426?text=NA' }],
                sources: [SOURCES.IAR],
                news: ['IAR: Nile AgroTech awarded regional grant for irrigation tech.'],
                notes: '',
                image: 'https://placehold.co/100x100/34d399/041426?text=I+F',
                sortWealth: 2900000
            },
            // 33: Tom√°≈° Kral (Originally #37)
            {
                name: 'Tom√°≈° Kral',
                flag: 'üá∏üá∞',
                position: 'Founder, Bratislava AI Labs',
                country: 'Slovakia',
                age: 27,
                companies: [{ name: 'Bratislava AI Labs', value: '‚Ç¨1.9M (converted to USD)', logo: 'https://placehold.co/60x60/7c3aed/041426?text=BA' }],
                sources: [SOURCES.MANUAL],
                news: ['none available'],
                notes: 'Conversion to USD noted.',
                image: 'https://placehold.co/100x100/7c3aed/041426?text=T+K',
                sortWealth: 2700000
            },
            // 34: Camila Alvarez (Originally #43)
            {
                name: 'Camila Alvarez',
                flag: 'üá¶üá∑',
                position: 'Director, Patagonia Outfitters',
                country: 'Argentina',
                age: 40,
                companies: [{ name: 'Patagonia Outfitters', value: 'ARS 180M (converted to USD)', logo: 'https://placehold.co/60x60/fb7185/041426?text=PO' }],
                sources: [SOURCES.MANUAL],
                news: ['none available'],
                notes: 'Converted to USD at time of estimate.',
                image: 'https://placehold.co/100x100/fb7185/041426?text=C+A',
                sortWealth: 2400000
            },
            // 35: Kwame Mensah (Originally #9)
            {
                name: 'Kwame Mensah',
                flag: 'üá¨üá≠',
                position: 'CEO, Adom Digital Finance',
                country: 'Ghana',
                age: 32,
                companies: [{ name: 'Adom Digital Finance', value: '$1.7M', logo: 'https://placehold.co/60x60/34d399/041426?text=AD' }],
                sources: [SOURCES.IAR],
                news: ['IAR: Adom secures micro-lending license expansion across two regions.'],
                notes: '',
                image: 'https://placehold.co/100x100/34d399/041426?text=K+M',
                sortWealth: 2200000
            },
            // 36: Fahim Khan (Originally #35)
            {
                name: 'Fahim Khan',
                flag: 'üáßüá©',
                position: 'Founder, Dhaka Clothing Co.',
                country: 'Bangladesh',
                age: 28,
                companies: [{ name: 'Dhaka Clothing Co.', value: '$1.05M', logo: 'https://placehold.co/60x60/f97316/041426?text=DC' }],
                sources: [SOURCES.RNS, SOURCES.MANUAL],
                news: ['RNS: Dhaka Clothing Co. lands a European retail contract.'],
                notes: '',
                image: 'https://placehold.co/100x100/f97316/041426?text=F+K',
                sortWealth: 1800000
            },
            // 37: Efe Olatunji (Originally #13)
            {
                name: 'Efe Olatunji',
                flag: 'üá≥üá¨',
                position: 'Co-CEO, Lagos AgroShift',
                country: 'Nigeria',
                age: 25,
                companies: [{ name: 'AgroShift', value: '$1.2M', logo: 'https://placehold.co/60x60/f59e0b/041426?text=AS' }],
                sources: [SOURCES.IAR],
                news: ['IAR: AgroShift pilot program wins government sustainability grant.'],
                notes: '',
                image: 'https://placehold.co/100x100/f59e0b/041426?text=E+O',
                sortWealth: 1750000
            },
            // 38: Nikita Suzuki (Originally #3, updated company case)
            {
                name: 'Nikita Suzuki',
                flag: 'üáßüá≠',
                position: 'Founder & CEO, MARLNAJ INSURANCE',
                country: 'Bahrain',
                age: 16,
                companies: [
                    { name: 'MARLNAJ INSURANCE', value: '$1,180,000 revenue / est.', logo: 'https://placehold.co/60x60/06b6d4/041426?text=MN' }
                ],
                sources: [SOURCES.IAR, SOURCES.RRPT],
                news: [
                    'Local business profile: ‚ÄúTeen CEO Nikita Suzuki scales MARLNAJ INSURANCE to $1.18M annual revenue.‚Äù (IAR)',
                    'Regional RRPT filing: MARLNAJ registers new small-business insurance product in Bahrain.',
                    'Community spotlight: local school awards to young entrepreneur (none financial).'
                ],
                notes: 'Values provided in USD by source (IAR/RRPT) and used directly.',
                image: 'https://placehold.co/100x100/06b6d4/041426?text=N+S',
                sortWealth: 1400000
            },
            // 39: Samuel Kiplagat (Originally #41)
            {
                name: 'Samuel Kiplagat',
                flag: 'üá∞üá™',
                position: 'Director, Rift Valley Greenhouses',
                country: 'Kenya',
                age: 48,
                companies: [{ name: 'Rift Valley Greenhouses', value: '$980k', logo: 'https://placehold.co/60x60/10b981/041426?text=RV' }],
                sources: [SOURCES.RRPT],
                news: ['RRPT: export permit approved for selected crops.'],
                notes: '',
                image: 'https://placehold.co/100x100/10b981/041426?text=S+K',
                sortWealth: 1320000
            },
            // 40: Sofia Alvarez (Originally #19)
            {
                name: 'Sofia Alvarez',
                flag: 'üá™üá∏',
                position: 'Creative Director, La Casa Media',
                country: 'Spain',
                age: 23,
                companies: [{ name: 'La Casa Media', value: '$680k', logo: 'https://placehold.co/60x60/fb7185/041426?text=LC' }],
                sources: [SOURCES.RNS],
                news: ['RNS: new streaming deal signed with Iberian broadcaster.'],
                notes: '',
                image: 'https://placehold.co/100x100/fb7185/041426?text=S+A',
                sortWealth: 1250000
            },
            // 41: Nadia Petrovna (Originally #34, age removed)
            {
                name: 'Nadia Petrovna',
                flag: 'üá∑üá∫',
                position: 'Director, Urals Textiles',
                country: 'Russia',
                age: 38,
                companies: [{ name: 'Urals Textiles', value: '$750k', logo: 'https://placehold.co/60x60/94a3b8/041426?text=UT' }],
                sources: [SOURCES.MANUAL],
                news: ['none available'],
                notes: '',
                image: 'https://placehold.co/100x100/94a3b8/041426?text=N+P',
                sortWealth: 1100000
            },
            // 42: Mariana Ferreira (Originally #28)
            {
                name: 'Mariana Ferreira',
                flag: 'üáµüáπ',
                position: 'Founder, Porto Design House',
                country: 'Portugal',
                age: 29,
                companies: [{ name: 'Porto Design House', value: '$700k', logo: 'https://placehold.co/60x60/fb7185/041426?text=PD' }],
                sources: [SOURCES.RNS, SOURCES.MANUAL],
                news: ['RNS: award for best new European design house.'],
                notes: '',
                image: 'https://placehold.co/100x100/fb7185/041426?text=M+F',
                sortWealth: 980000
            },
            // 43: Nuru Mwangi (Originally #26)
            {
                name: 'Nuru Mwangi',
                flag: 'üá∞üá™',
                position: 'CEO, Mombasa Blue Fisheries',
                country: 'Kenya',
                age: 27,
                companies: [{ name: 'Mombasa Blue Fisheries', value: '$600k', logo: 'https://placehold.co/60x60/10b981/041426?text=MB' }],
                sources: [SOURCES.IAR],
                news: ['IAR: sustainable fishing certification achieved.'],
                notes: '',
                image: 'https://placehold.co/100x100/10b981/041426?text=N+M',
                sortWealth: 850000
            },
            // 44: Yara Haddad (Originally #40)
            {
                name: 'Yara Haddad',
                flag: 'üá±üáß',
                position: 'Founder, Cedar Health (pharma distribution)',
                country: 'Lebanon',
                age: 31,
                companies: [{ name: 'Cedar Health', value: '$500k', logo: 'https://placehold.co/60x60/f97316/041426?text=CH' }],
                sources: [SOURCES.MANUAL],
                news: ['none available'],
                notes: '',
                image: 'https://placehold.co/100x100/f97316/041426?text=Y+H',
                sortWealth: 680000
            }
        ];

        let peopleData = [...basePeopleData]; // Use a mutable copy for sorting

        // Helper Functions
        function escapeHtml(str) {
            return str.replace(/"/g, '&quot;');
        }

        function createCompanyHtml(company) {
            if (!company) return '';
            return `
                <div class="flex items-center space-x-2 p-2 bg-slate-700 rounded-lg text-sm">
                    <img src="${company.logo || 'https://placehold.co/60x60/141E30/fff?text=CO'}" alt="${company.name} logo" class="w-6 h-6 rounded-full object-cover">
                    <div class="flex-1">
                        <p class="font-semibold text-slate-200">${company.name}</p>
                        <p class="text-xs text-slate-400">Value: ${company.value}</p>
                    </div>
                </div>
            `;
        }

        function createPersonCard(person) {
            const personJson = escapeHtml(JSON.stringify(person));
            const formattedValue = formatValue(person.sortWealth); // Use new formatter
            const companiesHtml = (person.companies || []).map(createCompanyHtml).join('');
            const sourceDotsHtml = (person.sources || []).map(source => `
                <div class="w-2.5 h-2.5 ${source.color} rounded-full" title="${source.name}"></div>
            `).join('');
            const sourceWarning = (!person.sources || person.sources.length === 0) ? `
                <div class="text-xs text-red-400 mt-2 p-2 bg-red-900/50 rounded-lg">
                    ‚ö†Ô∏è Warning: Value based on manual input. No primary source data used.
                </div>
            ` : '';

            // Compose a short news block
            let shortNews = 'none available';
            let hasActualNews = person.news && person.news.filter(n => n.toLowerCase().trim() !== 'none available').length > 0;
            if (hasActualNews) {
                shortNews = person.news.slice(0, 3).join(' ‚Ä¢ ');
            }

            const flagHtml = person.flag ? `<span class="flag">${person.flag}</span>` : '';
            const aiSummaryHtml = hasActualNews ? '<p class="text-xs text-slate-500 mt-1">Summarized by ‚ú® AI</p>' : ''; // Only show if there is news

            return `
                <div class="person-card fade-in-initial card-bg p-6 rounded-2xl shadow-xl border border-slate-700 hover:border-amber-400 transition-all duration-300 flex flex-col cursor-pointer"
                     onclick="openModal('${personJson}')">
                    <div class="flex items-center space-x-4 mb-4">
                        <img src="${person.image}" alt="${person.name}" class="w-16 h-16 rounded-full object-cover border-2 border-amber-400/50">
                        <div class="flex-1">
                            <h3 class="text-2xl font-bold text-slate-50">${flagHtml}${person.name}</h3>
                            <p class="text-amber-400 font-medium text-sm">${person.position}</p>
                            <p class="text-xs text-slate-400 mt-1">${person.country}</p>
                        </div>
                    </div>

                    <div class="mb-4">
                        <p class="text-sm uppercase tracking-wider text-slate-400">Estimated Net Worth</p>
                        <p class="text-4xl font-extrabold text-amber-500">${formattedValue}</p>
                        <p class="text-xs text-slate-500">accuracy varies by source</p>
                    </div>

                    <div class="mb-4 flex-1">
                        <p class="text-sm uppercase tracking-wider text-slate-400 mb-2">Key Assets</p>
                        <div class="space-y-2">
                            ${companiesHtml || '<p class="text-slate-500 text-sm">No major company assets listed.</p>'}
                        </div>
                    </div>

                    <div class="mb-4 border-t border-slate-800 pt-4">
                        <p class="text-sm uppercase tracking-wider text-slate-400 mb-2">Relevant News (RNS)</p>
                        <p class="text-sm italic text-slate-300 leading-snug">${shortNews}</p>
                        ${aiSummaryHtml}
                    </div>

                    <div class="mt-auto border-t border-slate-800 pt-4">
                        <div class="flex items-center justify-between">
                            <p class="text-xs text-slate-400">Data Sources Used:</p>
                            <div class="flex space-x-1.5">
                                ${sourceDotsHtml}
                                ${Array(Math.max(0, 3 - (person.sources ? person.sources.length : 0))).fill(
                                    '<div class="w-2.5 h-2.5 bg-slate-700 rounded-full" title="Source Not Used"></div>'
                                ).join('')}
                            </div>
                        </div>
                        ${sourceWarning}
                    </div>
                </div>
            `;
        }

        function applyFadeIn(containerId) {
            setTimeout(() => {
                document.querySelectorAll(`#${containerId} .fade-in-initial`).forEach((card, index) => {
                    setTimeout(() => card.classList.add('ready'), index * 45);
                });
            }, 10);
        }

        function renderCards(count) {
            const container = document.getElementById('cards-container');
            const cardsToDisplay = peopleData.slice(0, count);

            if (container) {
                container.innerHTML = cardsToDisplay.map(createPersonCard).join('');
                applyFadeIn('cards-container');
            }

            const loadMoreBtn = document.getElementById('load-more-btn');
            const totalCards = peopleData.length;

            if (count < totalCards) {
                loadMoreBtn.textContent = `Load More Cards (${totalCards - count} remaining)`;
                loadMoreBtn.style.display = 'inline-block';
            } else if (count >= totalCards && totalCards > initialCardCount) {
                loadMoreBtn.textContent = 'Show Fewer Cards';
                loadMoreBtn.style.display = 'inline-block';
            } else {
                loadMoreBtn.style.display = 'none';
            }
        }

        function sortAndRenderCards() {
            const sortValue = document.getElementById('sort-select').value;
            // Always reset to base data before sorting to maintain full list
            peopleData = [...basePeopleData];

            if (sortValue === 'wealth_desc') {
                // Sort by the numerical sortWealth property (descending), use name as tie-breaker
                peopleData.sort((a, b) => {
                    const wealthComparison = (b.sortWealth || 0) - (a.sortWealth || 0);
                    if (wealthComparison !== 0) return wealthComparison;
                    // Tie-breaker: Name (A-Z)
                    return a.name.localeCompare(b.name);
                });
            } else if (sortValue === 'name_asc') {
                // Sort by name (ascending)
                peopleData.sort((a, b) => a.name.localeCompare(b.name));
            }

            // After sorting, reset currentCardCount if we are not already showing all, and re-render.
            currentCardCount = peopleData.length > initialCardCount ? initialCardCount : peopleData.length;
            renderCards(currentCardCount);
        }

        function loadMore() {
            const totalCards = peopleData.length;
            // If currently showing initialCount, show all. If currently showing all, revert to initialCount.
            currentCardCount = currentCardCount < totalCards ? totalCards : initialCardCount;
            renderCards(currentCardCount);
        }

        function searchCards(searchTerm) {
            const term = searchTerm.toLowerCase().trim();
            const searchResultsContainer = document.getElementById('search-results-container');
            const searchResultsSection = document.getElementById('search-results-section');
            const popularCardsSection = document.getElementById('popular-cards-section');

            if (term === '') {
                searchResultsSection.classList.add('hidden');
                popularCardsSection.classList.remove('hidden');
                // Ensure popular cards reset to default view if search is cleared
                sortAndRenderCards();
                return;
            }

            const filteredData = basePeopleData.filter(person => {
                const companyNames = (person.companies || []).map(c => c.name).join(' ');
                const newsText = (person.news || []).join(' ');
                const searchData = `${person.name} ${person.position} ${person.country} ${newsText} ${companyNames}`.toLowerCase();
                return searchData.includes(term);
            });

            // Sort search results by wealth by default (since popular cards section is hidden)
            filteredData.sort((a, b) => (b.sortWealth || 0) - (a.sortWealth || 0));

            const cardsHtml = filteredData.map(createPersonCard).join('');
            searchResultsContainer.innerHTML = cardsHtml || '<p class="text-slate-400 text-lg py-8 col-span-4 italic">No SPORAX records found matching your query.</p>';

            popularCardsSection.classList.add('hidden');
            searchResultsSection.classList.remove('hidden');

            if (filteredData.length > 0) {
                 applyFadeIn('search-results-container');
            }
        }

        function openModal(personJson) {
            const person = JSON.parse(personJson);
            const modal = document.getElementById('card-modal');
            const modalContent = document.getElementById('modal-content');
            const formattedValue = formatValue(person.sortWealth); // Use new formatter

            const sourceDetailsHtml = Object.values(SOURCES).map(source => {
                const isUsed = person.sources && person.sources.some(s => s.id === source.id);
                return `
                    <div class="flex items-center space-x-3 text-lg">
                        <div class="w-3 h-3 ${isUsed ? source.color : 'bg-slate-700'} rounded-full"></div>
                        <span class="${isUsed ? 'text-slate-50 font-semibold' : 'text-slate-400'}">${source.name} (${source.id})</span>
                    </div>
                `;
            }).join('');

            const companyDetailsHtml = (person.companies || []).map(company => `
                <div class="flex items-center space-x-4 p-4 card-bg rounded-xl border border-slate-700">
                    <img src="${company.logo}" alt="${company.name} logo" class="w-10 h-10 rounded-full object-cover">
                    <div>
                        <p class="text-xl font-bold text-amber-300">${company.name}</p>
                        <p class="text-base text-slate-400">Est. Value: <span class="text-slate-200">${company.value}</span></p>
                    </div>
                </div>
            `).join('');

            const newsHtml = (person.news && person.news.length > 0) ? person.news.map(n => `<p class="text-base italic text-slate-300">‚Ä¢ ${n}</p>`).join('') : '<p class="text-slate-500 italic">none available</p>';

            const notesHtml = person.notes ? `<p class="text-xs text-slate-400 mt-2">Note: ${person.notes}</p>` : '';

            const flagHtml = person.flag ? `<span style="font-size:26px;margin-right:8px">${person.flag}</span>` : '';

            // Simplified age logic
            const ageDisplay = person.age ? ` ‚Ä¢ Age ${person.age}` : '';

            // News summary logic for modal (only show AI tag if there's actual news)
            let hasActualNews = person.news && person.news.filter(n => n.toLowerCase().trim() !== 'none available').length > 0;
            const aiSummaryModalHtml = hasActualNews ? '<p class="text-xs text-slate-500 mt-2">Summarized by ‚ú® AI</p>' : '';


            const modalHtml = `
                <div class="flex justify-between items-start mb-6 border-b border-slate-700 pb-4">
                    <div class="flex items-center space-x-6">
                        <img src="${person.image}" alt="${person.name}" class="w-20 h-20 rounded-full object-cover border-4 border-amber-400">
                        <div>
                            <h2 class="text-4xl font-black text-slate-50">${flagHtml}${person.name}</h2>
                            <p class="text-xl font-medium text-amber-400 mt-1">${person.position}</p>
                            <p class="text-sm text-slate-400 mt-1">${person.country}${ageDisplay}</p>
                        </div>
                    </div>
                    <button onclick="closeModal()" class="text-slate-400 hover:text-white transition duration-200 p-2 rounded-full hover:bg-slate-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <div class="lg:col-span-2">
                        <p class="text-lg uppercase tracking-wider text-slate-400 mb-2">Current Estimated Net Worth</p>
                        <p class="text-5xl font-extrabold text-amber-500">${formattedValue}</p>
                        <p class="text-sm text-slate-500 mt-1">Accuracy: varies by source | Last Updated: Today</p>
                        ${notesHtml}
                    </div>
                    <div class="bg-slate-700 p-4 rounded-xl">
                        <p class="text-sm uppercase tracking-wider text-slate-400 mb-2">Sources Used</p>
                        <div class="space-y-2">
                            ${sourceDetailsHtml}
                        </div>
                    </div>
                </div>

                <div class="mb-8">
                    <h3 class="text-2xl font-bold text-slate-100 mb-3 border-b border-slate-800 pb-2">Associated Companies & Assets</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        ${companyDetailsHtml || '<p class="text-slate-500 italic">No major corporate holdings currently itemized.</p>'}
                    </div>
                </div>

                <div class="mb-6">
                    <h3 class="text-2xl font-bold text-slate-100 mb-3 border-b border-slate-800 pb-2">Recent Reliable News (RNS)</h3>
                    <div class="p-4 bg-slate-700/50 rounded-xl">
                        ${newsHtml}
                        ${aiSummaryModalHtml}
                    </div>
                </div>
            `;

            modalContent.innerHTML = modalHtml;
            modal.classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
        }

        function closeModal() {
            document.getElementById('card-modal').classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
        }

        // Initialize the app
        window.onload = function() {
            // Set default sort to Net Worth (High to Low) and render
            document.getElementById('sort-select').value = 'wealth_desc';
            sortAndRenderCards();
        };
    </script>
</body>
</html>
